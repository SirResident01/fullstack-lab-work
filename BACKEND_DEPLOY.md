# üöÄ –î–µ–ø–ª–æ–π Backend API

## üìã –í–∞—Ä–∏–∞–Ω—Ç—ã —Ö–æ—Å—Ç–∏–Ω–≥–∞ Backend

### 1. **Railway** (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π) ‚≠ê
### 2. **Render** (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)
### 3. **Fly.io** (–•–æ—Ä–æ—à–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
### 4. **AWS Elastic Beanstalk** (–î–ª—è production)

---

## üåü –í–∞—Ä–∏–∞–Ω—Ç 1: Railway (–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ ($5 –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤ –º–µ—Å—è—Ü)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∏–∑ Git
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS

### –®–∞–≥–∏ –¥–µ–ø–ª–æ—è:

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:
- `Dockerfile.backend` ‚úÖ
- `requirements.txt` ‚úÖ
- `app/` –ø–∞–ø–∫–∞ —Å –∫–æ–¥–æ–º ‚úÖ

#### 2. –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Railway Dashboard

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app)
2. –ù–∞–∂–º–∏—Ç–µ **"Start a New Project"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Deploy from GitHub repo"**
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Dockerfile

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí **Variables** –¥–æ–±–∞–≤—å—Ç–µ:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Railway —Å–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ PostgreSQL)
# –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è PostgreSQL, Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç DATABASE_URL
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–≤—è–∑–∞–Ω–∞ —Å –≤–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–æ–º
# –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö PostgreSQL ‚Üí Connect ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Web Service

# –ï—Å–ª–∏ Railway –Ω–µ —Å–æ–∑–¥–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é:
DATABASE_URL=${{Postgres.DATABASE_URL}}

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤–Ω–µ—à–Ω—é—é –ë–î:
DB_URL=postgresql+psycopg://user:password@host:5432/cardb

# JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SECRET_KEY=your-very-secure-secret-key-min-32-characters-long
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# CORS (–¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à Vercel URL)
CORS_ORIGINS=https://fullstack-lab-work.vercel.app,https://fullstack-lab-work-oajjvn4s2-llls-projects-d13c13b6.vercel.app
```

#### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –í Railway Dashboard –Ω–∞–∂–º–∏—Ç–µ **"+ New"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Database"** ‚Üí **"Add PostgreSQL"**
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`
4. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `${{Postgres.DATABASE_URL}}`

#### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CORS –≤ –∫–æ–¥–µ

–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `app/main.py` —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å Vercel –¥–æ–º–µ–Ω—ã –≤ CORS:

```python
# –ü–æ–ª—É—á–∞–µ–º CORS origins –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cors_origins = os.getenv("CORS_ORIGINS", "http://localhost:3000").split(",")
cors_origins = [origin.strip() for origin in cors_origins]

app.add_middleware(
    CORSMiddleware,
    allow_origins=cors_origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

#### 6. –ü–æ–ª—É—á–µ–Ω–∏–µ URL –≤–∞—à–µ–≥–æ API

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Railway –¥–∞—Å—Ç –≤–∞–º URL –≤–∏–¥–∞:
```
https://your-project-name.up.railway.app
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç URL - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ frontend!

---

## üåê –í–∞—Ä–∏–∞–Ω—Ç 2: Render (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∏–∑ Git
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è PostgreSQL (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS

### –®–∞–≥–∏ –¥–µ–ø–ª–æ—è:

#### 1. –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Render Dashboard

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [render.com](https://render.com)
2. –ù–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"Web Service"**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Name:** `car-management-api`
   - **Environment:** `Docker`
   - **Dockerfile Path:** `Dockerfile.backend`
   - **Region:** –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π

#### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –ù–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"PostgreSQL"**
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Name:** `car-db`
   - **Database:** `cardb`
   - **User:** `admin`
   - **Region:** –¢–æ—Ç –∂–µ, —á—Ç–æ –∏ –¥–ª—è Web Service
3. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ **Internal Database URL**

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Web Service ‚Üí **Environment**:

```env
DB_URL=<Internal Database URL –∏–∑ PostgreSQL>
SECRET_KEY=your-very-secure-secret-key-min-32-characters
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440
CORS_ORIGINS=https://fullstack-lab-work.vercel.app
```

#### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ URL

Render –¥–∞—Å—Ç –≤–∞–º URL –≤–∏–¥–∞:
```
https://car-management-api.onrender.com
```

---

## üöÅ –í–∞—Ä–∏–∞–Ω—Ç 3: Fly.io

### –®–∞–≥–∏ –¥–µ–ø–ª–æ—è:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Fly CLI
curl -L https://fly.io/install.sh | sh

# –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç
fly auth login

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
fly launch

# –°–æ–∑–¥–∞–Ω–∏–µ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
fly postgres create

# –ü—Ä–∏–≤—è–∑–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
fly postgres attach <db-name>

# –î–µ–ø–ª–æ–π
fly deploy
```

---

## ‚öôÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Backend

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ backend API:

1. –ó–∞–π–¥–∏—Ç–µ –≤ **Vercel Dashboard**
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Environment Variables**
4. –û–±–Ω–æ–≤–∏—Ç–µ `NEXT_PUBLIC_API_BASE_URL`:
   ```
   NEXT_PUBLIC_API_BASE_URL=https://your-backend-url.railway.app
   ```
5. –ù–∞–∂–º–∏—Ç–µ **"Redeploy"**

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CORS –≤ Backend

**–í–ê–ñ–ù–û:** –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `app/main.py` —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å Vercel:

```python
import os

# –ü–æ–ª—É—á–∞–µ–º CORS origins –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ
cors_origins_env = os.getenv("CORS_ORIGINS", "")
if cors_origins_env:
    cors_origins = [origin.strip() for origin in cors_origins_env.split(",")]
else:
    # –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    cors_origins = [
        "http://localhost:3000",
        "http://localhost:3001",
        "http://127.0.0.1:3000",
        "https://fullstack-lab-work.vercel.app",
        "https://fullstack-lab-work-oajjvn4s2-llls-projects-d13c13b6.vercel.app",
    ]

app.add_middleware(
    CORSMiddleware,
    allow_origins=cors_origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] Backend —É—Å–ø–µ—à–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—Å—è
- [ ] PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] CORS –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Vercel –¥–æ–º–µ–Ω–æ–≤
- [ ] API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- [ ] Frontend –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º API URL
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: Frontend –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Backend

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –∏–ª–∏ `DB_URL`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL: `postgresql+psycopg://user:password@host:5432/dbname`

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Vercel URL –¥–æ–±–∞–≤–ª–µ–Ω –≤ `CORS_ORIGINS`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS (–Ω–µ HTTP)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è CORS

### –ü—Ä–æ–±–ª–µ–º–∞: 500 –æ—à–∏–±–∫–∏ –Ω–∞ API

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway/Render Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway
2. **–î–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Render
3. **–î–ª—è production:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway –∏–ª–∏ AWS

---

**–£–¥–∞—á–∏ —Å –¥–µ–ø–ª–æ–µ–º Backend! üöÄ**

