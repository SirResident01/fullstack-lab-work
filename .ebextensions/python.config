# Elastic Beanstalk конфигурация для Python/FastAPI

option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: app.main:app
    NumProcesses: 1
    NumThreads: 15

  aws:elasticbeanstalk:application:environment:
    PYTHONPATH: "/var/app/current:$PYTHONPATH"
    # Переменные окружения для БД (устанавливаются в EB Console)
    # DB_URL - полный URL подключения к БД
    # RDS_HOSTNAME, RDS_PORT, RDS_DB_NAME, RDS_USERNAME, RDS_PASSWORD - для AWS RDS
    # SECRET_KEY - секретный ключ для JWT
    # ALGORITHM - алгоритм JWT (по умолчанию HS256)
    # ACCESS_TOKEN_EXPIRE_MINUTES - время жизни токена (по умолчанию 1440)

  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: "/api/status"
    MatcherHTTPCode: "200"

  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: static

  aws:autoscaling:launchconfiguration:
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role

  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced

  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 7



